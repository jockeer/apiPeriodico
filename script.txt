drop table personas
drop table docente
drop table administrador

create table roles (
idrol int GENERATED by DEFAULT as IDENTITY PRIMARY KEY,
nombre text not NULL
)


CREATE TABLE personas (
    idPer int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
		nombre text not null,
		aPaterno text not null,
		aMaterno text not null,
		email text not null,
		tel text not null,
		foto text not null,
		estado char(1),
		idrol int REFERENCES roles(idrol)
		);

create table cuenta(
--idcuenta serial primary key,
idPer int references personas(idPer),
usuario text not null,
password text not null,
cambiarpass char(1) not null,
PRIMARY KEY(idPer)
)



create table docente(
	  ci text not null,
		idPer int REFERENCES personas(idPer),
		PRIMARY key(idPer)
);

CREATE table administrador (
		jefatura text not null,
		idPer int REFERENCES personas(idPer),
		PRIMARY KEY(idPer)
);

create table materia (
idMat int GENERATED by DEFAULT as IDENTITY PRIMARY KEY,
siglas text not null,
nombre text not null
);


drop table destinos
create table destinos(
idDestinos int GENERATED by DEFAULT as IDENTITY PRIMARY KEY,
nombre text not null,
 estado char(1)
);

create table modulos(
idModulo int GENERATED by DEFAULT as IDENTITY PRIMARY key,
modulo int  not NULL
);

drop table semestre
create table semestre(
idSemestre int GENERATED by DEFAULT as IDENTITY PRIMARY key,
nombreSem text not null,
anio text
);

create table turno (
idTurno int GENERATED by DEFAULT as IDENTITY PRIMARY KEY,
turno text not null
);

drop table programacion_destinos
create table programacion_destinos(
idProg int GENERATED by DEFAULT as IDENTITY PRIMARY KEY,
fecha date  null,
estado char not null,
idDestinos int REFERENCES destinos(idDestinos),
idTurno int REFERENCES turno(idTurno),
idSemestre int REFERENCES semestre(idSemestre),
idModulo int REFERENCES modulos(idModulo),
idArea int REFERENCES areas(idAreas),
idPer int REFERENCES docente(idPer),
idMat int REFERENCES materia (idMat)
);


create table facultad(
idFacultad int GENERATED by DEFAULT as IDENTITY PRIMARY KEY,
nombre text not null
);

create table carreras(
idCarreras int GENERATED by DEFAULT as IDENTITY PRIMARY key,
nombre text not null,
idFacultad  int REFERENCES facultad(idFacultad)
);

create table areas(
idAreas int GENERATED by DEFAULT as IDENTITY PRIMARY key,
nombre text not null,
idCarreras int REFERENCES carreras(idCarreras)
);

drop table vistias_tecnicas
create table vistias_tecnicas(
idVisitas int GENERATED by DEFAULT AS IDENTITY PRIMARY KEY,
objetivo text not null,
descripcion text not null,
informe text not null,
duracion text not null,
idProg int REFERENCES programacion_destinos(idProg)
);



drop table actividades
create table actividades(
imgAct text not null,
idVisitas int REFERENCES vistias_tecnicas(idVisitas) ,
PRIMARY KEY(idVisitas)
);
